@page "/LoginRenter"
@using BB.eu.Web.Services
@using BB.eu.Shared.Models
@inject IRenterService renterService

<h3>LoginRenter</h3>

@if (!IsLoggedIn)
{
    <EditForm Model="Renter" OnSubmit="HandleSubmit">
        <div class="form-group">
            <label >Email</label>
            <InputText @bind-Value="Renter.Email" class="form-control"></InputText>
        </div>
        <div class="form-group">
            <label >Password</label>
            <InputText type="password" @bind-Value="Renter.Password" class="form-control"></InputText>
        </div>
        <button type="submit" class="btn btn-primary">Register</button>
    </EditForm>
}
else
{
    <EditForm Model="Renter">
        <div class="form-group">
            <label class="font-weight-bold´8">Id: </label>
            <label>@Renter.Id</label>
        </div>
        <div class="form-group">
            <label class="font-weight-bold´8">Email: </label>
            <label>@Renter.Email</label>
        </div>
        <div class="form-group">
            <label class="font-weight-bold´8">FirstName: </label>
            <label>@Renter.FirstName</label>
        </div>
        <div class="form-group">
            <label class="font-weight-bold´8">LastName: </label>
            <label>@Renter.LastName</label>
        </div>
    </EditForm>
}

@code {
    private Renter Renter { get; set; } = new Renter();
    public bool IsLoggedIn = false;

    private async Task HandleSubmit()
    {
        Renter r = await renterService.LoginAsync(Renter);
        if (r == null)
            return;
        Renter = r;
        IsLoggedIn = true;
    }

}